<h1 class="text-2xl font-bold mb-4">
    {% if component %}
      Edit Component id {{ component.id }} recipe_id ={{ recipe.id }}
    {% else %}
      Create Component 
    {% endif %} 
  </h1>

  
  <form
    action="{% if component %}/crud/edit_component/{{ component.id }}{% else %}/crud/create_component{% endif %}"
    method="post"
    class="space-y-4"
  >
    <input type="hidden" name="recipe_id" value="{{ recipe.id }}">
      <div>
          <label for="name" class="block font-bold">Component Name {{ recipe.id }}</label>
          <input
            type="text"
            name="name"
            id="name"
            class="w-full border p-2 rounded"
            value="{{ component.name if component else '' }}"
            required
          >
      </div>
      <div>
          <label for="description" class="block font-bold">Description</label>
          <textarea
            name="description"
            id="description"
            class="w-full border p-2 rounded"
            rows="4"
            required
          >{{ component.description if component else '' }}</textarea>
      </div>
    
      {% if component %}
      <a href="#" onclick="deleteComponent({{ component.id }})" class="text-red-500 mt-4 hover:underline">-verwijder</a>
    {% endif %}
      <button type="submit" class="bg-blue-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-600">
        {% if component %}
          Update Component
        {% else %}
          Create Component
        {% endif %}
      </button>
  </form>


<script>
  function deleteComponent(componentId) {
      if (confirm("Are you sure you want to delete this ingredient?")) {
          fetch(`/crud/delete_component/${componentId}`, {
              method: 'DELETE',
              headers: {
                  'Content-Type': 'application/json',
              },
          })
          .then(response => {
              if (response.ok) {
                  window.location.reload();  // Refresh the page to show the changes
              } else {
                  alert("Error deleting ingredient.");
              }
          })
          .catch(error => {
              console.error("Error:", error);
              alert("An error occurred while deleting the ingredient.");
          });
      }
  }

</script>
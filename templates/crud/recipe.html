<div class="max-w-4xl mx-auto bg-white p-6 rounded shadow mt-8">
    <h1 class="text-3xl font-bold mb-4">
        {% if recipe.id %}
            Edit Recipe
        {% else %}
            Create Recipe
        {% endif %}
    </h1>
</div>
<hr>
<form 
        action="{% if recipe.id %}/crud/edit_recipe/{{ recipe.id }}{% else %}/crud/create_recipe{% endif %}" 
        method="post" 
        class="space-y-4">
        
        <!-- Recipe Name -->
        <div>
            <label for="name" class="block font-bold">Name</label>
            <input 
                type="text" 
                name="name" 
                id="name" 
                value="{{ recipe.name or '' }}" 
                class="w-full border p-2 rounded" 
                required>
        </div>

        <!-- Description -->
        <div>
            <label for="description" class="block font-bold">Description</label>
            <textarea 
                name="description" 
                id="description" 
                class="w-full border p-2 rounded" 
                required>{{ recipe.description or '' }}</textarea>
        </div>

        <!-- Category -->
        <div>
            <label for="category" class="block font-bold">Category</label>
            <input 
                type="text" 
                name="category" 
                id="category" 
                value="{{ recipe.category or '' }}" 
                class="w-full border p-2 rounded">
        </div>

        <!-- Prep Time -->
        <div>
            <label for="prep_time" class="block font-bold">Prep Time (minutes)</label>
            <input 
                type="number" 
                name="prep_time" 
                id="prep_time" 
                value="{{ recipe.prep_time or '' }}" 
                class="w-full border p-2 rounded" 
                min="0">
        </div>

        <!-- Difficulty -->
        <div>
            <label for="difficulty" class="block font-bold">Difficulty</label>
            <input 
                type="text" 
                name="difficulty" 
                id="difficulty" 
                value="{{ recipe.difficulty or '' }}" 
                class="w-full border p-2 rounded">
        </div>

        <button
        class="text-red-600 hover:text-red-800 text-sm font-medium"
        onclick="deleteRecipe({{ recipe.id }})">
        Delete
    </button>

        <!-- Submit Button -->
        <button 
            type="submit" 
            class="bg-blue-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-600">
            {% if recipe.id %} Save Changes {% else %} Create Recipe {% endif %}
        </button>
    </form>

<hr>

<script>
    async function deleteRecipe(recipeId) {
        if (confirm("Are you sure you want to delete this recipe?")) {
            const response = await fetch(`/crud/delete_recipe/${recipeId}`, { method: "DELETE" });
            if (response.ok) {
                alert("Recipe deleted successfully.");
                location.reload(); // Reload to update the list
            } else {
                alert("Failed to delete the recipe.");
            }
        }
    }
</script>